{% extends "layout.html" %}

{% block content %}
   {% if showForm %}
  <form action="/tweets" method="POST">
    <label for="name_field">Name:</label>
    <input name="name" type="text" id="name_field" value="{{dynName}}" />

    <label for="text_field">Text:</label>
    <input name="text" type="text" id="text_field" style="width: 350px;" />

    <input type="submit" value="Submit" />
  </form>
  {% endif %}

  <div class="page-header">
    <h1>Welcome to Twitter.js!</h1>
  </div>
  <div class="row">
    <div class="col-md-3">
      <img src="https://pbs.twimg.com/profile_images/2450268678/olxp11gnt09no2y2wpsh_normal.jpeg"><br>
      <b>Your Name</b><br>
      100 followers
    </div>
    <div class="col-md-9" id ="tweetList">
    
      <!-- display tweets here -->
      {% for tweet in tweets %}
       
        <li><a href="/users/{{tweet.name}}"><h4>{{tweet.name}}</h4></a> <br> 
        {{tweet.text}}</li>
      {% endfor %}
      
    </div>
  </div>
  <script src="/socket.io/socket.io.js"></script>
<script>
  // Load the socket.io library above, then connect to the server.
  // Because the socket.io server is being run on the same server as your 
  // Express instance, you can connect() without any arguments.
  var socket = io.connect();

  // When 'new_tweet' events are fired, do something with the packaged tweet
  socket.on('new_tweet', function (tweet) { 
    // $('#tweetList').append('<li><a href="/users/{{tweet.name}}"><h4>'+tweet.name+'</h4></a> <br> 
    //     '+tweet.text+'</li>')
    $('#tweetList').prepend('<li><a href="/users/'+tweet.name+'"><h4>'+tweet.name+'</h4></a><br>'+tweet.text+'</li>')
    // some logic to add the new tweet to the DOMâ€¦
  }); 
</script>

 
    
{% endblock %}